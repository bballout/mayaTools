def locIt():
    cmds.undoInfo(openChunk=True)
    ctrls = cmds.ls(sl=True)
    for ctrl in ctrls:
        ctrlGrp = cmds.listRelatives(ctrl,parent=True)[0]
        mainCtrlGrp = cmds.listRelatives(ctrlGrp,parent=True)[0]
        constraintConnection = cmds.connectionInfo('%s.translateX'%mainCtrlGrp,sfd=True)
        constraint = constraintConnection.split('.')[0]
        weight = cmds.parentConstraint(constraint,q=True,tl=True)[0]
        clusterConnection = cmds.connectionInfo('%s.translateX'%ctrl,dfs=True)[0]
        clusterName = clusterConnection.split('.')[0]
        loc = cmds.spaceLocator(name='%s_loc'%ctrl)[0]
        locGrp = cmds.group(empty=True,name='%s_loc_grp'%ctrl)
        cmds.parent(loc,locGrp)
        tempCon = cmds.pointConstraint(ctrl,locGrp)
        cmds.delete(tempCon)
        #cmds.parentConstraint(weight,locGrp,mo=True)
        cmds.parentConstraint(ctrl,loc,mo=True)
        cmds.connectAttr('%s.translateX'%loc,'%s.translateX'%clusterName,f=True)
        cmds.connectAttr('%s.translateY'%loc,'%s.translateY'%clusterName,f=True)
        cmds.connectAttr('%s.translateZ'%loc,'%s.translateZ'%clusterName,f=True)
        
        cmds.connectAttr('%s.rotateX'%loc,'%s.rotateX'%clusterName,f=True)
        cmds.connectAttr('%s.rotateY'%loc,'%s.rotateY'%clusterName,f=True)
        cmds.connectAttr('%s.rotateZ'%loc,'%s.rotateZ'%clusterName,f=True)
        
    cmds.undoInfo(closeChunk=True)
        
locIt()